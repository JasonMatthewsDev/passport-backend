(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{10:function(e,t,n){e.exports=n(23)},18:function(e,t,n){},20:function(e,t,n){},21:function(e,t,n){},22:function(e,t,n){},23:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(2),o=n(8),u=n(5),l=n(4),s=(n(18),n(3)),i=n.n(s),m=n(6),p=(n(20),Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_ORIGIN),d=void 0===p?"":p,f=function(e){var t=e.onSubmit,n=Object(a.useRef)(null),o=Object(c.d)();Object(a.useEffect)(function(){return n.current.focus()},[]);var u=function(){var e=Object(m.a)(i.a.mark(function e(n){var a,r,c,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),a={name:n.target.name.value,lowerBound:n.target.lowerBound.value,upperBound:n.target.upperBound.value,itemCount:n.target.itemCount.value},t(),e.next=5,fetch("".concat(d,"/factory"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 5:if(201===(r=e.sent).status){e.next=14;break}return e.next=9,r.json();case 9:c=e.sent,u=c.error,o.error(u),e.next=15;break;case 14:o.success("Factory Created");case 15:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:u},r.a.createElement("div",{className:"add-factory-container"},r.a.createElement("div",{className:"add-factory-control"},r.a.createElement("label",null,"Name ",r.a.createElement("span",{className:"required"},"*")),r.a.createElement("input",{type:"text",name:"name",placeholder:"Name...",pattern:"[a-zA-Z0-9 -]+",ref:n,required:!0})),r.a.createElement("div",{className:"add-factory-control"},r.a.createElement("label",null,"Item Count ",r.a.createElement("span",{className:"required"},"*")),r.a.createElement("input",{type:"number",name:"itemCount",placeholder:"Item Count...",defaultValue:"3",min:"1",max:"15",required:!0})),r.a.createElement("div",{className:"add-factory-control"},r.a.createElement("label",null,"Lower Bound ",r.a.createElement("span",{className:"required"},"*")),r.a.createElement("input",{type:"number",name:"lowerBound",defaultValue:"1",placeholder:"Lower Bound...",required:!0})),r.a.createElement("div",{className:"add-factory-control"},r.a.createElement("label",null,"Upper Bound ",r.a.createElement("span",{className:"required"},"*")),r.a.createElement("input",{type:"number",name:"upperBound",defaultValue:"500",placeholder:"Upper Bound...",required:!0})),r.a.createElement("button",{type:"submit"},"Add Factory")))},E=(n(21),function(e){var t=e.cancel,n=e.onChange,c=e.pattern,o=e.title,u=e.value,l=e.type,s=void 0===l?"text":l,i=Object(a.useRef)(null);Object(a.useEffect)(function(){return i.current.focus()},[]);return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),n(i.current.value)}},r.a.createElement("span",{className:"click-input-wrapper"},r.a.createElement("input",{className:"click-input-text",type:s,onKeyDown:function(e){"Escape"===e.key&&t()},ref:i,defaultValue:u,pattern:c,title:o}),r.a.createElement("button",{type:"submit",className:"click-input-button"},r.a.createElement("span",{role:"img","aria-label":"confirm"},"\u2714\ufe0f")),r.a.createElement("button",{className:"click-input-button",onClick:t},r.a.createElement("span",{role:"img","aria-label":"cancel"},"\u274c"))))}),b=function(e){var t=e.value,n=e.onChange,c=e.pattern,o=e.title,u=e.type,s=Object(a.useState)(!1),i=Object(l.a)(s,2),m=i[0],p=i[1],d=r.a.createElement("span",{className:"click-input-label",onClick:function(){return p(!0)}},t);return m?r.a.createElement(E,{value:t,cancel:function(){return p(!1)},onChange:function(e){p(!1),n(e)},type:u,pattern:c,title:o}):d},y=n(9),v=(n(22),Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_API_ORIGIN),N=void 0===v?"":v,O=function(e){var t=Object(a.useState)(!0),n=Object(l.a)(t,2),o=n[0],u=n[1],s=Object(c.d)(),p=e._id,d=e.lowerBound,f=e.name,E=e.nodes,v=e.upperBound,O=new RegExp("^[a-zA-Z0-9 -]+$"),w=function(){var e=Object(m.a)(i.a.mark(function e(t){var n,a,r,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=JSON.stringify({change:t}),e.next=3,fetch("".concat(N,"/factory/").concat(p),{method:"PATCH",headers:{"Content-Type":"application/json"},body:n});case 3:if(202===(a=e.sent).status){e.next=12;break}return e.next=7,a.json();case 7:r=e.sent,c=r.error,s.error(c),e.next=13;break;case 12:s.success("Factory Updated");case 13:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),h=function(e,t){("name"!==e||O.test(t))&&w(Object(y.a)({},e,t))},j=function(){var e=Object(m.a)(i.a.mark(function e(){var t,n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u(!1),e.next=3,fetch("".concat(N,"/factory/").concat(p),{method:"DELETE",headers:{"Content-Type":"application/json"}});case 3:if(202===(t=e.sent).status){e.next=12;break}return e.next=7,t.json();case 7:n=e.sent,a=n.error,s.error(a),e.next=13;break;case 12:s.success("Factory Deleted");case 13:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}();return r.a.createElement("li",{className:"container"},r.a.createElement("div",{className:"factory-inputs-p"},r.a.createElement("span",{className:"factory-name"},r.a.createElement(b,{value:f,onChange:function(e){return h("name",e)},pattern:"[a-zA-Z0-9 -]+",title:"Letters, numbers, spaces and - only"})),o?r.a.createElement("button",{className:"factory-delete-button",onClick:j},r.a.createElement("span",{role:"img","aria-label":"delete"},"\u274c")):r.a.createElement("span",null,"\xa0"),r.a.createElement("span",{className:"factory-lower-bound"},r.a.createElement(b,{value:d,type:"number",onChange:function(e){return h("lowerBound",e)}})),r.a.createElement("span",{className:"factory-upper-bound"},r.a.createElement(b,{value:v,type:"number",onChange:function(e){return h("upperBound",e)}}))),r.a.createElement("ul",null,E.map(function(e,t){return r.a.createElement("li",{key:t},r.a.createElement("div",null,e))})))},w=window.location.origin.replace(/^http/,"ws"),h=new WebSocket(w),j=function(){var e=Object(a.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],o=Object(a.useState)(!1),u=Object(l.a)(o,2),s=u[0],i=u[1];return h.onmessage=function(e){var t=e.data;return c(JSON.parse(t).Factories)},h.onclose=function(){return setTimeout(function(){(h=new WebSocket(w)).onmessage=function(e){var t=e.data;return c(JSON.parse(t).Factories)}},5e3)},r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"tree-container"},"Root",r.a.createElement("div",{className:"tree-root"},n.map(function(e){var t=e._id,n=e.name,a=e.lowerBound,c=e.upperBound,o=e.nodes;return r.a.createElement(O,{name:n,lowerBound:a,upperBound:c,nodes:o,_id:t,key:t})}))),r.a.createElement("div",{className:"add-factory-form"},s?r.a.createElement(f,{onSubmit:function(){return i(!1)}}):r.a.createElement("button",{onClick:function(){return i(!0)}},"Create Factory")))},C={position:c.b.BOTTOM_CENTER,timeout:5e3,offset:"30px",transition:c.c.SCALE};Object(u.render)(r.a.createElement(function(){return r.a.createElement(c.a,Object.assign({template:o.a},C),r.a.createElement(j,null))},null),document.getElementById("root"))}},[[10,1,2]]]);
//# sourceMappingURL=main.39f82260.chunk.js.map